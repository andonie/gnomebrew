{% extends 'base.html' %}

{% block scripts %}
{% with include_interactive = True %}
{{ super() }}
{% endwith %}
{% endblock %}

{% block brand %}<a class="gb-brand" href="#" onclick="$('.gb-sidebar').toggleClass('sb-toggle')">Gnomebrew</a>{% endblock %}
{% block navbar_content %}

<div class="gb-navbar-item">
    {{ icon('item.gold') | safe }}
    <span class="storage-gold">{{ shorten_cents(current_user.get('storage.gold')) }}</span>
</div>
{% with prompt_heads = get_prompt_head_dict(current_user) %}
{% for prompt_type in prompt_heads %}
<div class="gb-navbar-container">
    <div class="gb-navbar-item gb-navbar-item-clickable{% if prompt_heads[prompt_type] is none %} gb-navbar-hidden{% endif %}" id="{{ css_friendly(prompt_type) }}-prompt" onclick="request_prompt('{{ prompt_type }}', this)">
    {{ icon('special.prompt.' + prompt_type) | safe }}
    </div>
</div>
{% endfor %}
{% endwith %}
{{ super() }}
{% endblock %}

{% block navbar_extras %}{% endblock %}

{% block sidebar_outer %}
<div class="gb-sidebar" id="gb.sidebar">
    {% block sidebar %}
    {{ current_user.get('html.station.storage', id_buffer=buffer) | safe }}
    {% endblock %}
</div>
{% endblock %}

{% block app_content %}
<div id="gb_prompt_container"></div>
{% with user_stations = get_unlocked_station_list(current_user, id_buffer=buffer),
        slots= current_user.get('slots._all', id_buffer=buffer) %}
<div class="grid" id="station-grid" data-masonry='{"itemSelector": ".grid-item", "columnWidth": 300, "gutter": 5}'>
    {% for station in user_stations if not station.has_special_ui() %}
    {{ current_user.get('html.station.' + station.get_minimized_id(), slots=slots, id_buffer=buffer)|safe }}
    {% endfor %}
</div>
{% endwith %}
{% endblock %}