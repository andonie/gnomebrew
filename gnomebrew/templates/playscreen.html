{% extends 'base.html' %}

{% set game_data = current_user.get_game_data() %}

{% block scripts %}
{% with include_interactive = True %}
{{ super() }}
{% endwith %}
{% endblock %}

{% block navbar_extras %}
<script>
add_startup(function() {
    $('#storage-toggle').on('click', function(event) {
        $('.gb-sidebar').toggleClass('sb-toggle');
    });
});
</script>
<li class="navbar-item">
    {{ icon('special.storage', class='nav-link gb-link gb-icon', href='#', id='storage-toggle') | safe }}
</li>
{% endblock %}

{% block sidebar_outer %}
<div class="gb-sidebar sb-toggle" id="gb.sidebar">
    {% block sidebar %}
    {{ current_user.get('html.station.storage', game_data=game_data)|safe }}
    {% endblock %}
</div>
{% endblock %}

{% block app_content %}
<div id="ingame_event">
    {% if current_user.get('ingame_event.queued') %}
    {{ current_user.get('html.ingame_event.next') | safe }}
    <script>
        add_startup(function () {
            show_event_modal();
        });
    </script>
    {% endif %}
</div>
{% with user_stations = current_user.get_unlocked_station_list(),
        slots=current_user.get('slots._all') %}
<div class="grid" id="station-grid" data-masonry='{"itemSelector": ".grid-item", "columnWidth": 300, "gutter": 5}'>
    {% for station in user_stations if not has_station_special_ui(station) %}
    {{ current_user.get('html.station.' + station, slots=slots, game_data=game_data)|safe }}
    {% endfor %}
</div>
{% endwith %}
{% endblock %}